<!DOCTYPE html>
<html lang="hu">
<head>
    <title> Background </title>
    <meta charset="utf-8" />
    <style>
        .hr{
            height: 100vh;
            width: 100%;
            position: absolute;
            top: 0px;
            left: 0px;
            margin: 0px;
            padding: 0px;
            opacity: 0;
            transition: 1s;
        }


        .co {
            opacity: 1;
            transition: .3s;
        }


        .fr {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 25s ease infinite;
        }

        .bg {
            background:  linear-gradient(-45deg, rgb(0,100,73), rgb(94,0,85), rgb(121,34,7));
            background-size: 400% 400%;
            animation: gradient 25s ease infinite;
        }

        .div{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            height: 250px;
            width: 250px;
        }

        .div span{
            position: absolute;
            top: 0%;
            left: 0%;
            height: 120px;
            width: 120px;
            background: rgba(255, 255, 255, 0.603);
            border-radius: 5px;
            box-shadow: rgba(0, 0, 0, 0.342) 0px 0px 15px;
        }

        .div span:nth-child(2){
            top: 0%;
            left: 52%;
        }
        .div span:nth-child(3){
            top: 53%;
            left: 0%;
        }
        .div span:nth-child(4){
            top: 53%;
            left: 52%;
        }

        @keyframes gradient {
            0% {
                background-position: 30% 40%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 30% 40%;
            }
        }

        p{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #000;
            position: absolute;
            left: 93%;
            margin: 0px;
            top: 94%;
            transform: translate(-50%, -50%);
            background-color: #ccc;
            padding: 5px;
            border-radius: 3px;
            text-align: center;
        }
        .switch {
            position: absolute;
            top: 94%;
            left: 88%;
            margin: 0px;
            transform: translate(-50%, -50%);
            display: inline-block;
            width: 48px;
            height: 30px;
        }


        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 21px;
            width: 21px;
            left: 4px;
            bottom: 4.5px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            
            border-radius: 50%;
        }

        
        .switch input { 
            opacity: 0;
            width: 0;
            height: 0;
        }

        input:checked + .slider {
            background-color: #119955;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .dot {
            border-radius: 50%;
            filter: blur(1px);
        }
        @keyframes dota {
            0% {
                background-color: transparent;
                box-shadow: none;
            }
            50% {
                background-color: rgb(206, 252, 255);
                box-shadow: rgb(255, 255, 255) 0px 0px 1px;
            }
            100%{
                background-color: transparent;
                box-shadow: none;
            }
        }


        .re {
            position: absolute;
            left: 85.3%;
            border: 0px;
            margin: 0px;
            height: fit-content;
            width: fit-content;
            line-height: 0px;
            cursor: pointer;
            top: 94%;
            transform: translate(-50%, -50%);
            background-color: #ccc;
            padding: 5px;
            border-radius: 50%;
            text-align: center;
        }
    </style>
    <script>
        function onc(){
            var asd1 = document.getElementById('fr')
            var asd2 = document.getElementById('bg')
            
            asd1.classList.toggle("co")
            asd2.classList.toggle("co")
        }
 
        const rand = (m) => {
            return parseInt(m * Math.random() ,10);
        }

        function elementsOverlap(el1, el2) {
            const domRect1 = el1.getBoundingClientRect();
            const domRect2 = el2.getBoundingClientRect();

            return !(
                domRect1.top > domRect2.bottom ||
                domRect1.right < domRect2.left ||
                domRect1.bottom < domRect2.top ||
                domRect1.left > domRect2.right
            );
        }


        function ft(){
            let man = document.getElementById('bg')
            man.innerHTML = ""

            let nm = rand(30)
            while (nm < 10) nm = rand(30)
            for (let i = 0; i < nm; i++) {
                setTimeout(function () {
                    genew()
                }, rand(20) * 1000)
            }
        }
        function genew(){
            let man = document.getElementById('bg')
            let sd = gen()
            man.appendChild(sd.d)

            setTimeout(function() {
                document.getElementById('bg').removeChild(sd.d)
                genew()
            }, sd.t * 1000);
        }
        function gen(){
            let div = document.createElement('div')
            let wtime = rand(400)
            while (wtime < 50) wtime = rand(400)
            let w = rand(5)
            let x = rand((innerWidth - w))
            let y = rand((innerHeight - w))
            
            div.style.position = 'absolute'
            div.style.width = w + 'px'
            div.style.height = w + 'px'
            div.style.animation = `dota ${wtime / 10}s ease infinite`
            div.style.background = `rgba( 255, 255, 255, ${Math.random() + 0.5} )`
            div.classList.add('dot')
            
            div.style.top = y + 'px'
            div.style.left = x + 'px'

            
            var s1 = document.getElementById("1")
            var s2 = document.getElementById("2")
            var s3 = document.getElementById("3")
            var s4 = document.getElementById("4")

            while (elementsOverlap(div, s1) || elementsOverlap(div, s2) || elementsOverlap(div, s3) || elementsOverlap(div, s4)){
                let x = rand((innerWidth - w))
                let y = rand((innerHeight - w))

                div.style.top = y + 'px'
                div.style.left = x + 'px'
            }
            
            return {d: div, t: wtime / 10 }
        }

       
    </script>
    
</head>
<body onload="ft()">
    <div id="fr" class="hr fr"> </div>
    <div id="bg" class="hr bg co"> </div>
    <button onclick="ft()" class="re">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
        </svg>
    </button>
    <label class="switch">
        <input onchange="onc()" type="checkbox" id="ch" checked>
        <span class="slider round"></span>
    </label>
    <p>martinfiu#5814</p>
    <div class="div" id="hju">
        <span id="1"></span>
        <span id="2"></span>
        <span id="3"></span>
        <span id="4"></span>
    </div>
</body>
</html>
